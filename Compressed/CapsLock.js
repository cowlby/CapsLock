(function(){var a=null,d=(Browser.Engine.trident)?document:window;function c(e){if(e.code>64&&e.code<91){a=(e.shift)?null:true}else{if(e.code>96&&e.code<123){a=(e.shift)?true:false}}if(a!==null){d.removeEvent("keypress",c)}}window.addEvent("blur",function(e){a=null;d.addEvent("keypress",c)});function b(e){if(e.code==20&&a!==null){if(Browser.Engine.webkit&&Browser.Engine.version>420){a=(e.event.type=="keydown")}else{if(e.event.type=="keydown"){a=!a}}}}d.addEvents({keyup:b,keydown:b,keypress:c});Event.implement({hasCapsLock:function(e){return a}});Element.Events.capsLockOn={base:"keydown",condition:function(e){if(e.code==20){if(Browser.Engine.webkit&&Browser.Engine.version>420){return true}else{if(a!==null){return !a}}}else{if(a!==null){return e.hasCapsLock()}}}};Element.Events.capsLockOff={base:(Browser.Engine.webkit)?"keyup":"keydown",condition:function(e){if(e.code==20){if(Browser.Engine.webkit&&Browser.Engine.version>420){return true}else{if(a!==null){if(a===true){return true}}}}else{if(a!==null){return !e.hasCapsLock()}}}}})();